//Leetcode 802
//Graphs - Find Eventual Safe States

public class SafeStates {
    public List<Integer> eventualSafeNodes(int[][] graph) {
        int n = graph.length;
        List<Integer> answer = new ArrayList<>();
        boolean [] visited = new boolean[n];
        boolean [] safe = new boolean[n];

        for (int i = 0; i < n; i++) {
           if(dfs(visited , safe , i ,graph)) answer.add(i);
        }
        return answer;
    }

    public boolean dfs(boolean [] visited , boolean [] safe , int node , int [][] graph){
        if(safe[node] || graph[node].length == 0) return true;
        if(visited[node] && !safe[node]) return false;
        visited[node] = true;
         int size = graph[node].length;
        for (int i = 0; i < size; i++){
            int elem = graph[node][i];
            if(!dfs(visited , safe , elem , graph)) return false;
        }
        safe[node] = true;
        return true;
    }
}
